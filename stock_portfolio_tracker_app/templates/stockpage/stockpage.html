<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Portfolio.io</title>

    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

  </head>
  <body>

    <div class="container-fluid">
    	<div class="row">
    		<div class="col-md-12">


          <!-- Add stock form -->
    			<div class="modal fade" id="stockpage-addstockformmodal-1" role="dialog" aria-labelledby="stockpage-addstockformmodallabel-1" aria-hidden="true">
    				<div class="modal-dialog" role="document">
    					<div class="modal-content">
    						<div class="modal-header">
    							<h5 class="modal-title">
    								Add A Stock
    							</h5>
    							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    						</div>
    						<div class="modal-body">
                  <form role="form" id="stockpage-addstockform-1" method="post">
                    {% csrf_token %}
            				<div class="form-group row mb-3">
                      <div class="col-sm-12">
                        <label for="stockpage-addstockticker-1">
                          Stock Ticker:
                        </label>
                        <input type="text" class="form-control" name="stockpage-addstockticker-2" id="stockpage-addstockticker-2">
                      </div>
            				</div>
            				<div class="form-group row mb-3">
                      <div class="col-sm-12">
              					<label for="stockpage-adddatepurchased-1">
              						Date Purchased:
              					</label>
              					<input type="text" class="form-control" name="stockpage-adddatepurchased-2" id="stockpage-adddatepurchased-2" placeholder="MM/DD/YYYY">
                      </div>
            				</div>
                    <div class="form-group row mb-3">
                      <div class="col-sm-12">
              					<label for="stockpage-addaverageprice-1">
              						Average Price:
              					</label>
              					<input type="text" class="form-control" name="stockpage-addaverageprice-2" id="stockpage-addaverageprice-2">
                      </div>
            				</div>
                    <div class="form-group row mb-3">
                      <div class="col-sm-12">
              					<label for="stockpage-addquantity-1">
              						Quantity:
              					</label>
              					<input type="text" class="form-control" name="stockpage-addquantity-2" id="stockpage-addquantity-2">
                      </div>
            				</div>
                    <div class="form-group row mb-3">
                      <div class="col-sm-12">
              					<label for="stockpage-addcurrency-1">
              						Currency:
              					</label>
                        <select class="form-select" name="stockpage-addcurrency-2" id="stockpage-addcurrency-2">
                          {% for currency in currencytable %}
                            {% if currency.currencycode == "AUD"%}
                              <option value="{{ currency.id }}" selected>{{ currency.currencycode }}</option>
                            {% else %}
                              <option value="{{ currency.id }}">{{ currency.currencycode }}</option>
                            {% endif %}
                          {% endfor %}
                        </select>
                      </div>
            				</div>
            				<button type="submit" class="btn btn-primary" name="stockpage-addstockbutton-1" value="addstockbutton">
            					Add
            				</button>
            			</form>
    						</div>
    					</div>
    				</div>
    			</div>


          <!-- Add profit adjustments form -->
          <div class="modal fade" id="stockpage-addprofitmodal-1" role="dialog" aria-labelledby="stockpage-addprofitmodallabel-1" aria-hidden="true">
    				<div class="modal-dialog" role="document">
    					<div class="modal-content">
    						<div class="modal-header">
    							<h5 class="modal-title">
    								Add Profit Adjustments
    							</h5>
    							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    						</div>
    						<div class="modal-body">
                  <form role="form" id="stockpage-addprofitform-1" method="post">
                    {% csrf_token %}
            				<div class="form-group row mb-3">
                        <div class="col-sm-12">
              					<label for="stockpage-addprofitfromsold-1">
              						Profit From Sold:
              					</label>
              					<input type="text" class="form-control" name="stockpage-addprofitfromsold-2">
                      </div>
            				</div>
            				<div class="form-group row mb-3">
                      <div class="col-sm-12">
              					<label for="stockpage-addprofitfromdividends-1">
              						Profit From Dividends:
              					</label>
              					<input type="text" class="form-control" name="stockpage-addprofitfromdividends-2">
                      </div>
            				</div>
            				<button type="submit" class="btn btn-primary" name="stockpage-addprofitbutton-1" value="addprofitbutton">
            					Save Changes
            				</button>
            			</form>
    						</div>
    					</div>
    				</div>
          </div>


          <!-- title -->
    			<div class="row mt-3">
            <div class="col-md-11">
              <h3>
                Portfolio.io
              </h3>
            </div>
            <div class="col-md-1">
              <form role="form" id="stockpage-logoutform-1" name="stockpage-logoutform-1" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-md btn-primary float-end" name="stockpage-logoutbutton-1" value="logout">
                  Logout
                </button>
              </form>
            </div>
    			</div>

          <hr>

          <!-- stock configuration buttons -->
          <div class="row mb-3">
    				<div class="col-md-2">
              <button type="button" class="btn btn-md btn-primary" id="stockpage-addstockbutton-1" data-bs-target="#stockpage-addstockformmodal-1" role="button" class="btn" data-bs-toggle="modal">Add A Stock</button>
    				</div>
            <div class="col-md-6">

            </div>
            <div class="col-md-2">
              <form role="form" id="stockpage-viewaudform-1" name="stockpage-viewaudform-1" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-md btn-primary float-end" name="stockpage-viewaudbutton-1" value="TRUE">
                  View AUD Market Value
                </button>
              </form>

            </div>
            <div class="col-md-2">
              <form role="form" id="stockpage-viewlocalform-1" name="stockpage-viewlocalform-1" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-md btn-primary float-end" name="stockpage-viewlocalbutton-1" value="FALSE">
                  View Local Market Value
                </button>
              </form>
            </div>

    			</div>

          <!-- stock information table -->
          <div class="row mb-3">
    				<div class="col-md-12">
              <table class="table table-bordered table-hover" id="stockpage-stocktable-1">
        				<thead>
        					<tr>
        						<th>
        							Date Purchased
        						</th>
        						<th>
        							Code
        						</th>
        						<th>
        							Quantity
        						</th>
        						<th>
        							Average Price
        						</th>
                    <th>
        							Market Price
        						</th>
                    <th>
        							Invested Amount
        						</th>
                    <th>
        							Market Value
        						</th>
                    <th>
        							Profit ($)
        						</th>
                    <th>
        							Profit (%)
        						</th>
                    <th>
        							Edit
        						</th>
        					</tr>
        				</thead>
        				<tbody>
                  {% for stock in stocktable %}
                    <tr id="stockpage-stockid-{{stock.stockid}}">

                      {% with arr="stockid currencyid" %}
                        {% for key, value in stock.items %}
                            {% if not key in arr.split %}
                              <td>
                                {{ value }}
                              </td>
                            {% endif %}
                        {% endfor %}
                      {% endwith %}

                      <td>
          							<a id="stockpage-stockid-{{stock.stockid}}" href="#stockpage-editstockformmodal-{{stock.stockid}}" data-bs-toggle="modal"><i class="bi bi-pencil-fill"></i></a>
                        <a id="stockpage-deletebutton-1" href="#stockpage-deletestockformmodal-{{stock.stockid}}" data-bs-toggle="modal"><i class="bi bi-trash-fill"></i></a>

                        <!-- Edit stock form -->
                    		<div class="modal fade" id="stockpage-editstockformmodal-{{stock.stockid}}" role="dialog" aria-labelledby="stockpage-editstockformmodallabel-{{stock.stockid}}" aria-hidden="true">
                    			<div class="modal-dialog" role="document">
                    				<div class="modal-content">
                    					<div class="modal-header">
                    						<h5 class="modal-title">
                    							Edit Stock Details
                    						</h5>
                    						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    					</div>
                    					<div class="modal-body">
                                <form role="form" id="stockpage-editstockform-{{stock.stockid}}" method="post">
                                  {% csrf_token %}
                          				<div class="form-group row mb-3">
                                    <div class="col-sm-12">
                            					<label for="stockpage-editstockticker-1">
                            						Stock Ticker:
                            					</label>
                            					<input type="text" class="form-control" name="stockpage-editstockticker-2" id="stockpage-editstockticker-2" value="{{ stock.stockticker }}">
                                    </div>
                          				</div>
                          				<div class="form-group row mb-3">
                                    <div class="col-sm-12">
                            					<label for="stockpage-editdatepurchased-1">
                            						Date Purchased:
                            					</label>
                            					<input type="text" class="form-control" name="stockpage-editdatepurchased-2" id="stockpage-editdatepurchased-2" placeholder="MM/DD/YYYY" value="{{ stock.stockdatepurchased }}">
                                    </div>
                          				</div>
                                  <div class="form-group row mb-3">
                                    <div class="col-sm-12">
                            					<label for="stockpage-editaverageprice-1">
                            						Average Price:
                            					</label>
                            					<input type="text" class="form-control" name="stockpage-editaverageprice-2" id="stockpage-editaverageprice-2" value="{{ stock.stockaverageprice|slice:"1:-4" }}">
                                    </div>
                          				</div>
                                  <div class="form-group row mb-3">
                                    <div class="col-sm-12">
                            					<label for="stockpage-editquantity-1">
                            						Quantity:
                            					</label>
                            					<input type="text" class="form-control" name="stockpage-editquantity-2" id="stockpage-editquantity-2" value="{{ stock.stockquantity }}">
                                    </div>
                          				</div>
                                  <div class="form-group row mb-3">
                                    <div class="col-sm-12">
                            					<label for="stockpage-editcurrency-1">
                            						Currency:
                            					</label>
                                      <select class="form-select" name="stockpage-editcurrency-2" id="stockpage-editcurrency-2">
                                        {% for currency in currencytable %}
                                          {% if currency.id == stock.currencyid %}
                                            <option value="{{ currency.id }}" selected>{{ currency.currencycode }}</option>
                                          {% else %}
                                            <option value="{{ currency.id }}">{{ currency.currencycode }}</option>
                                          {% endif %}
                                        {% endfor %}
                                      </select>
                                    </div>
                          				</div>
                          				<button type="submit" class="btn btn-primary" name="stockpage-editstockbutton-1" value="{{ stock.stockid }}">
                          					Save Changes
                          				</button>
                          			</form>
                    					</div>
                    				</div>
                    			</div>
                    		</div>

                        <!-- Delete stock form -->
                    		<div class="modal fade" id="stockpage-deletestockformmodal-{{stock.stockid}}" role="dialog" aria-labelledby="stockpage-deletestockformmodallabel-{{stock.stockid}}" aria-hidden="true">
                    			<div class="modal-dialog" role="document">
                    				<div class="modal-content">
                    					<div class="modal-header">
                    						<h5 class="modal-title">
                    							Delete Stock Details
                    						</h5>
                    						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    					</div>
                    					<div class="modal-body">
                                <form role="form" id="stockpage-deletestockform-{{stock.stockid}}" method="post">
                                  {% csrf_token %}
                          				<div class="form-group row mb-3">
                                    <div class="col-sm-12">
                            					<label for="stockpage-deletestockticker-1">
                            						Stock Ticker:
                            					</label>
                            					<input type="text" class="form-control" name="stockpage-deletestockticker-2" id="stockpage-deletestockticker-2" value="{{ stock.stockticker }}" readonly>
                                    </div>
                          				</div>
                          				<div class="form-group row mb-3">
                                    <div class="col-sm-12">
                            					<label for="stockpage-deletedatepurchased-1">
                            						Date Purchased:
                            					</label>
                            					<input type="text" class="form-control" name="stockpage-deletedatepurchased-2" id="stockpage-deletedatepurchased-2" placeholder="MM/DD/YYYY" value="{{ stock.stockdatepurchased }}" readonly>
                                    </div>
                          				</div>
                                  <div class="form-group row mb-3">
                                    <div class="col-sm-12">
                            					<label for="stockpage-deleteaverageprice-1">
                            						Average Price:
                            					</label>
                            					<input type="text" class="form-control" name="stockpage-deleteaverageprice-2" id="stockpage-deleteaverageprice-2" value="{{ stock.stockaverageprice|slice:"1:-4" }}" readonly>
                                    </div>
                                  </div>
                                  <div class="form-group row mb-3">
                                    <div class="col-sm-12">
                            					<label for="stockpage-deletequantity-1">
                            						Quantity:
                            					</label>
                            					<input type="text" class="form-control" name="stockpage-deletequantity-2" id="stockpage-deletequantity-2" value="{{ stock.stockquantity }}" readonly>
                                    </div>
                          				</div>
                                  <div class="form-group row mb-3">
                                    <div class="col-sm-12">
                            					<label for="stockpage-deletecurrency-1">
                            						Currency:
                            					</label>
                                      {% for currency in currencytable %}
                                        {% if currency.id == stock.currencyid %}
                                          <input type="text" class="form-control" name="stockpage-deletequantity-2" id="stockpage-deletequantity-2" value="{{ currency.currencycode }}" readonly>
                                        {% endif %}
                                      {% endfor %}
                                    </div>
                          				</div>
                          				<button type="submit" class="btn btn-primary" name="stockpage-deletestockbutton-1" value="{{ stock.stockid }}">
                          					Delete
                          				</button>
                          			</form>
                    					</div>
                    				</div>
                    			</div>
                    		</div>

          						</td>
                    </tr>
                  {% endfor %}

        				</tbody>
        			</table>
    				</div>
    			</div>



          <!-- summary statistics configuration buttons -->
          <div class="row mb-3">
    				<div class="col-md-12">
              <button type="button" class="btn btn-md btn-primary" id="stockpage-addprofitsbutton-1" href="#stockpage-addprofitmodal-1" role="button" class="btn" data-bs-toggle="modal">
                Add Profit Adjustments
              </button>
            </div>
          </div>

          <!-- summary statistics table -->
    			<div class="row">
    				<div class="col-md-6">
    					<table class="table table-bordered table-hover" id="stockpage-profitstable-1">
    						<tbody>
    							<tr>
    								<th>
    									Total Invested Amount
    								</th>
                    <td>
    									{{ profit_table_1_dic_formatted.totalinvestedamount }}
    								</td>
    							</tr>
                  <tr>
    								<th>
    									Total Market Amount
    								</th>
                    <td>
    									{{ profit_table_1_dic_formatted.totalmarketamount }}
    								</td>
    							</tr>
                  <tr>
    								<th>
    									Gross Profit ($)
    								</th>
                    <td>
    									{{ profit_table_1_dic_formatted.grossprofit }}
    								</td>
    							</tr>
                  <tr>
    								<th>
    									Gross Profit (%)
    								</th>
                    <td>
    									{{ profit_table_1_dic_formatted.grossprofitpercentage }}
    								</td>
    							</tr>
    						</tbody>
    					</table>
    				</div>
    				<div class="col-md-6">
              <table class="table table-bordered table-hover" id="stockpage-profitstable-2">
    						<tbody>
    							<tr>
    								<th>
    									Profit From Sold
    								</th>
                    <td>
    									{{ profit_table_2_dic_formatted.profitfromsold }}
    								</td>
    							</tr>
                  <tr>
    								<th>
    									Profit From Dividend
    								</th>
                    <td>
    									{{ profit_table_2_dic_formatted.profitfromdividend }}
    								</td>
    							</tr>
                  <tr>
    								<th>
    									Net Profit ($)
    								</th>
                    <td>
    									{{ profit_table_2_dic_formatted.netprofit }}
    								</td>
    							</tr>
                  <tr>
    								<th>
    									Net Profit (%)
    								</th>
                    <td>
    									{{ profit_table_2_dic_formatted.netprofitpercentage }}
    								</td>
    							</tr>
    						</tbody>
    					</table>
    				</div>
    			</div>

    		</div>
    	</div>
    </div>

    <!-- javascript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>

  </body>
</html>
